{{#each erros}}
    <div class="alert alert-danger">{{texto}}</div>
{{else}}

{{/each}}
<div class="card">
    <div class="card-body">
        <h4>Editar Postagem</h4>
        <form action="/admin/postagem/edit" method="post">
        <input type="hidden" value="{{postagem._id}}" name="id">
            <label for="titulo">Titulo: </label>
            <input type="text" name="titulo" class="form-control mt-2" required
                placeholder="Digite aqui" autocomplete="off" value="{{postagem.titulo}}">

            <label for="slug">Slug: </label>
            <input type="text" name="slug" class="form-control mt-2" required
                required placeholder="Digite aqui" autocomplete="off" value="{{postagem.slug}}">

            <label for="descricao">Descrição: </label>
            <input type="text" name="descricao" class="form-control mt-2" required 
                placeholder="Digite aqui" autocomplete="off" value="{{postagem.descricao}}">
            
            <label for="conteudo">Conteudo: </label>
            <textarea name="conteudo" class="form-control mt-2" required 
                placeholder="Digite aqui" autocomplete="off">{{postagem.conteudo}}</textarea>

            <label for="categoria">Categoria: </label>
            <select name="categoria" class="form-select mt-2" id="categoria">
                {{#each categorias}}
                    <option value="{{_id}}">{{nome}}</option>
                {{else}}
                    <option value="0">Nehnuma Categoria Registrada</option>
                {{/each}}
            </select>
            <button type="submit" class="btn btn-success mt-4" >Editar Postagem</button>
        </form>
    </div>
</div>

<script>
    const atualizarSel = () => {
        var categoria = document.getElementById("categoria");
        var optionSel = document.getElementsByTagName("option");
        var idSel = "{{postagem.categoria._id}}";

        for(var i = 0; i < optionSel.length; i++) {
            if(optionSel[i].value === idSel) {
                optionSel[i].setAttribute("selected", "true");
            }
        }
    }
    atualizarSel();
</script>


